
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="author" content="Boris Staal">
  
  <meta name="description" content="&larr; Back to entries Vagrant to the masses! Apr 12, 2013 | Hospice, Rove, Sinatra, Vagrant If you ever tried to unify development environments &hellip;">
  
  
  <link rel="canonical" href="http://archive.staal.io/blog/2013/04/12/vagrant-to-the-masses/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr.js"></script>
  <script src="/javascripts/jquery.js"></script>
  <script src="/javascripts/application.js"></script>
  <link href="/atom.xml" rel="alternate" title="Staal Forge" type="application/atom+xml">
  <title>Vagrant to the masses! - Staal Forge</title>
</head>
<body>
  <table class="layoutTable" cellspacing="0" cellpadding="0">
    <tbody>
      <tr>
        <td class="layoutSidebar" >
          <div class="sidebar">
            <div class="content">
              <div class="about">
                <a href="/"><img src="/images/bs_ava.png" alt="Boris Staal"></a>
                <h1><a href="/">Boris Staal</a></h1>
                <h2>About me</h2>
                <p>
                  I'm Boris Staal, the enterpreneur geek ಠ_ಠ.
                  I do open-source and make ppl smile ^_^.
                </p>
              </div>
              <div class="follow">
                <a href="https://twitter.com/_inossidabile"><img src="/images/s_twitter.png" alt="Boris Staal"></a>
                <a href="http://facebook.com/boris.staal"><img src="/images/s_facebook.png" alt="Boris Staal"></a>
                <a href="http://github.com/inossidabile"><img src="/images/s_cat.png" alt="Boris Staal"></a>
                <a href="skype://inossidabile."><img src="/images/s_skype.png" alt="Boris Staal"></a>
              </div>
              <div class="projects">
                <h2>Projects I'm part of:</h2>
                <div class="list">
                  <div class="project joosy">
                    <a href="http://joosy.ws">Joosy</a>
                    <p>Rails-flavored browser applications framework</p>
                  </div>
                  <div class="project roundbank">
                    <a href="https://github.com/roundbank">Roundbank</a>
                    <p>Open-source internet banking platform</p>
                  </div>
                  <div class="project smartkiosk">
                    <a href="https://github.com/smartkiosk">Smartkiosk</a>
                    <p>Open-source kiosk platform</p>
                  </div>
                  <div class="project rove">
                    <a href="http://rove.io">Rove.io</a>
                    <p>Service that allows you to pregenerate typical Vagrant builds</p>
                  </div>
                  <div class="project heimdallr">
                    <a href="https://github.com/roundlake/heimdallr">Protector</a>
                    <p>Comfortable white-list security restrictions for ORMs on a field level</p>
                  </div>
                  <div class="project wash_out">
                    <a href="https://github.com/inossidabile/wash_out">WashOut</a>
                    <p>Rails 3 SOAP server library</p>
                  </div>
                  <div class="project codo">
                    <a href="https://github.com/coffeedoc/codo">Codo</a>
                    <p>CoffeeScript API documentation generator</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </td>
        <td class="layoutContent">
          <div class="header">
            <ul>
              <li 
                
                >
                <a href="/">Blog</a>
              </li>
              <li
                
                >
                <a href="/blog/archives">Archives</a>
              </li>
            </ul>
          </div>
          <div class="content">
            <div class="post">
  <div class="button">
    <span>&larr;</span>
    <a href="/">Back to entries</a>
  </div>

  <article>
    <h1>Vagrant to the masses!</h1>
    <time>Apr 12, 2013 | <a class='category' href='/blog/categories/hospice/'>Hospice</a>, <a class='category' href='/blog/categories/rove/'>Rove</a>, <a class='category' href='/blog/categories/sinatra/'>Sinatra</a>, <a class='category' href='/blog/categories/vagrant/'>Vagrant</a></time>
    <p>If you ever tried to unify development environments across project teams you probably heard of <a href="http://vagrantup.com/">Vagrant</a>. It integrates into a development process like a charm and works flawlessly. The chances that you stay with that as soon as you won an epic fight against provisioning are pretty high.</p>

<p><strong>But unfortunately the chances to win provisioning are not high at all.</strong></p>

<blockquote><p>There are two feature-rich options for provisioning: Chef and Puppet. Hereinafter I will intend Chef (as the most popular option) whenever I say &ldquo;provisioning&rdquo;.</p></blockquote>

<p>Setting up a virtual environment with Chef is NOT an easy task. Chef lacks centralized repository of recipes and this results into a huge mess. There are at least ten Redis recipes with different configurations for example. Top 5 Google results are outdated and will not even start. So while in general Chef is a great piece of technology, you better be a qualified DevOps with a set of ready and tested recipes to navigate nicely in its world.</p>

<p>What&rsquo;s for us as developers? Recently I had a chance to help with the development of something that sorts naughty provisioning out. On behalf of its author, Andrey Deryabin, let me present you <strong><a href="http://rove.io">Rove</a></strong> &mdash; the Vagrant configuration service.</p>

<!-- more -->


<h3>How to use</h3>

<p>We&rsquo;ve gathered some working recipes for typical configurations and wraped them into a visual interface. Use a form to select packages you need, fill in required options and, ta-dam, you have a new and shiny environment.</p>

<p><img src="http://f.cl.ly/items/2z19450w3u1O1Y14011c/hospice.png" alt="Rove" /></p>

<p>Rove will generate a ZIP-archive containing two files: Vagrantfile and Cheffile.</p>

<ol>
<li><p><strong>Vagrantfile</strong> is a main Vagrant configuration. Typically it is supposed to be placed at the root of your project. Just put it whenever you want your box root should be. Additional documentation can be found <a href="http://docs.vagrantup.com/v2/vagrantfile/index.html">here</a>.</p></li>
<li><p><strong>Cheffile</strong> describes sources of cookbooks we use to provision packages you demanded. It&rsquo;s used by <a href="https://github.com/applicationsonline/librarian">Librarian</a> to download all the cookbooks you need including referenced dependencies. Unless you already have it install it using <code>gem install librarian-chef</code> command.</p></li>
</ol>


<p>To finalize the setup and run your box you should:</p>

<ul>
<li>put both of files to the root of your project (it will be the root of a virtual box)</li>
<li>run <code>librarian-chef install</code> to grab required cookbooks</li>
<li>run <code>vagrant up</code> to download, provision and start your brand new box environment.</li>
</ul>


<h3>The goal</h3>

<p>There is something more behind Rove than just a web interface. The interface itself is based on a small DSL that allows you to help us make the service better. Currently it consists of 12 recipes but we hope it&rsquo;s just a start. Rove sources are hosted at <a href="https://github.com/aderyabin/">Github</a> and you are free to extend the whole service with new recipes by using <a href="https://github.com/aderyabin/rove/pulls">pull requests</a>.</p>

<p>That&rsquo;s said: Chef recipes&#8217; reality is a big mess at the moment. We hope to separate the wheat from the chaff. And if you can help &mdash; you are very very welcome.</p>

<p>We have prepared a <a href="https://github.com/aderyabin/rove#dsl-description">nice introduction to the DSL at README</a>. Duplicating it here would not make a lot of sense. Let met introduce you a real package to demonstrate how easy it is instead:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># :redis is an id of package</span>
</span><span class='line'><span class="c1"># It will also set default title to &#39;Redis&#39;</span>
</span><span class='line'><span class="no">Rove</span><span class="o">.</span><span class="n">package</span> <span class="ss">:redis</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Let&#39;s assign it to the proper category</span>
</span><span class='line'>  <span class="n">category</span> <span class="s1">&#39;Databases&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># And activate required cookbook and recipe</span>
</span><span class='line'>  <span class="n">cookbook</span> <span class="s1">&#39;redis&#39;</span><span class="p">,</span> <span class="n">github</span><span class="p">:</span> <span class="s1">&#39;ctrabold/chef-redis&#39;</span>
</span><span class='line'>  <span class="n">recipe</span> <span class="s1">&#39;redis&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># This is a typical configuration option</span>
</span><span class='line'>  <span class="c1"># It will appear as a textual input field within web interface</span>
</span><span class='line'>  <span class="n">input</span> <span class="ss">:bind</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># And as a required value it has to have a default value</span>
</span><span class='line'>    <span class="n">default</span> <span class="s1">&#39;127.0.0.1&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># This block will influence resulting provisioning config</span>
</span><span class='line'>    <span class="c1"># All the hashes returning from `config` methods will be merged deeply</span>
</span><span class='line'>    <span class="n">config</span> <span class="p">{</span><span class="o">|</span><span class="n">value</span><span class="o">|</span> <span class="p">{</span><span class="n">redis</span><span class="p">:</span> <span class="p">{</span><span class="n">bind</span><span class="p">:</span> <span class="n">value</span><span class="p">}}}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">input</span> <span class="ss">:port</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">default</span> <span class="s1">&#39;6379&#39;</span>
</span><span class='line'>    <span class="n">config</span> <span class="p">{</span><span class="o">|</span><span class="n">value</span><span class="o">|</span> <span class="p">{</span><span class="n">redis</span><span class="p">:</span> <span class="p">{</span><span class="n">port</span><span class="p">:</span> <span class="n">value</span><span class="p">}}}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can found another bunch of live samples here: <a href="https://github.com/aderyabin/rove/blob/master/packages/">/packages</a>.</p>

<hr />

<p>Personally I&rsquo;m pretty excited about Rove. It&rsquo;s something that made Vagrant affordable for me &mdash; I don&rsquo;t have to spend days seeking for a proper recipe anymore. And I really hope Rove will get a chance to save a bit of your time too <img class="icon" src="https://a248.e.akamai.net/assets.github.com/images/icons/emoji/bow.png" height="20" />.</p>

  </article>

  

<script type="text/javascript">
      var disqus_shortname = 'staalforge';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://archive.staal.io/blog/2013/04/12/vagrant-to-the-masses/';
        var disqus_url = 'http://archive.staal.io/blog/2013/04/12/vagrant-to-the-masses/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  
    <section class="comments">
      <div id="disqus_thread" aria-live="polite"></div>
    </section>
  
</div>

          </div>
          <div class="footer">
            Powered by <a href="http://octopress.org">Octopress</a>; Hosted at <a href="https://github.com/inossidabile/blog">Github</a>; Stay tuned :)
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f707c6c613f5d6d0000003f');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
  </script>
</body>
</html>