
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="author" content="Boris Staal">
  
  <meta name="description" content="Last tweet was supposed to be here but Twitter blocked anonymous API requests ;( Heimdallr: ORM field-level security Apr 01, 2012 | CanCan, &hellip;">
  
  
  <link rel="canonical" href="http://staal.io/blog/page/2/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr.js"></script>
  <script src="/javascripts/jquery.js"></script>
  <script src="/javascripts/application.js"></script>
  <link href="/atom.xml" rel="alternate" title="Staal Forge" type="application/atom+xml">
  <title>Staal Forge</title>
</head>
<body>
  <table class="layoutTable" cellspacing="0" cellpadding="0">
    <tbody>
      <tr>
        <td class="layoutSidebar" >
          <div class="sidebar">
            <div class="content">
              <div class="about">
                <a href="/"><img src="/images/bs_ava.png" alt="Boris Staal"></a>
                <h1><a href="/">Boris Staal</a></h1>
                <h2>About me</h2>
                <p>
                  I'm Boris Staal, the enterpreneur geek ಠ_ಠ.
                  I do open-source and make ppl smile ^_^.
                </p>
              </div>
              <div class="follow">
                <a href="https://twitter.com/_inossidabile"><img src="/images/s_twitter.png" alt="Boris Staal"></a>
                <a href="http://facebook.com/boris.staal"><img src="/images/s_facebook.png" alt="Boris Staal"></a>
                <a href="http://github.com/inossidabile"><img src="/images/s_cat.png" alt="Boris Staal"></a>
                <a href="skype://inossidabile."><img src="/images/s_skype.png" alt="Boris Staal"></a>
              </div>
              <div class="projects">
                <h2>Projects I'm part of:</h2>
                <div class="list">
                  <div class="project joosy">
                    <a href="http://joosy.ws">Joosy</a>
                    <p>Rails-flavored browser applications framework</p>
                  </div>
                  <div class="project roundbank">
                    <a href="https://github.com/roundbank">Roundbank</a>
                    <p>Open-source internet banking platform</p>
                  </div>
                  <div class="project smartkiosk">
                    <a href="https://github.com/smartkiosk">Smartkiosk</a>
                    <p>Open-source kiosk platform</p>
                  </div>
                  <div class="project rove">
                    <a href="http://rove.io">Rove.io</a>
                    <p>Service that allows you to pregenerate typical Vagrant builds</p>
                  </div>
                  <div class="project heimdallr">
                    <a href="https://github.com/roundlake/heimdallr">Protector</a>
                    <p>Comfortable white-list security restrictions for ORMs on a field level</p>
                  </div>
                  <div class="project wash_out">
                    <a href="https://github.com/inossidabile/wash_out">WashOut</a>
                    <p>Rails 3 SOAP server library</p>
                  </div>
                  <div class="project codo">
                    <a href="https://github.com/coffeedoc/codo">Codo</a>
                    <p>CoffeeScript API documentation generator</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </td>
        <td class="layoutContent">
          <div class="header">
            <ul>
              <li 
                
                >
                <a href="/">Blog</a>
              </li>
              <li
                
                >
                <a href="/blog/archives">Archives</a>
              </li>
            </ul>
          </div>
          <div class="content">
            <div class="twitterBar">
  <table>
    <tr>
      <td>
        <a href="http://twitter.com/_inossidabile">
          <img src="/images/twitter.png" alt="twitter">
        </a>
      </td>
      <td id="tweet">
        <a href="http://twitter.com/_inossidabile">Last tweet</a> was supposed to be here but Twitter blocked anonymous API requests ;(
      </td>
    </tr>
  </table>
</div>
<div class="index">
  
  
  <article class="main">
    <h1>
      <a href="/blog/2012/04/01/heimdallr-orm-field-level-security/">Heimdallr: ORM field-level security</a>
    </h1>
    <time>
      Apr 01, 2012 | <a class='category' href='/blog/categories/cancan/'>CanCan</a>, <a class='category' href='/blog/categories/heimdallr/'>Heimdallr</a>, <a class='category' href='/blog/categories/rails/'>Rails</a>, <a class='category' href='/blog/categories/security/'>Security</a>
    </time>
    <p>We are currently migrating most of our products to browser-side application. One of the worst issues it raises is proper permissions handling. There are no comfortable ways to implement context-based protection of models (and their fields) within ActiveRecord (Egor, say hi ;). <code>attr_acessible</code> is too weak. CanCan is too abstract (doesn&rsquo;t go down to fields).</p>

<p>We’ve figured out something awesome to solve this issue. Meet <a href="https://github.com/roundlake/heimdallr/">Heimdallr</a> and it’s extension <a href="https://github.com/roundlake/heimdallr-resource">Heimdallr::Resource</a>. They will bring you a peace and security.</p>

<h3>Heimdallr</h3>

<p>Let’s start from the deeper problem investigation though. Large part of Rails projects equates security to a REST restriction. The bigger projects sometimes fall down to a model to keep code DRY. And to keep your controllers/actions number from getting wild you may fall down to fields.</p>

<p><img src="http://media.tumblr.com/tumblr_m1tdm3wF8m1r9yc7i.png" alt="" /></p>


  </article>
  <div class="more">
    <div class="read">
      <a href="/blog/2012/04/01/heimdallr-orm-field-level-security/">Read more</a>
      <span>&rarr;</span>
    </div>
    <div class="comments">
      <img src="/images/comments.png">
      <a href="/blog/2012/04/01/heimdallr-orm-field-level-security/#disqus_thread">Comments</a>
    </div>
  </div>
  
  
  
  
  <div class="olders">
  
    <ul class="olders">
    <li class="older odd">
      <article>
        <h1>
          <a href="/blog/2012/03/24/rails-plus-rest-avoiding-the-views-nightmare/">Rails + REST: views nightmare</a>
        </h1>
        <time>
          Mar 24, 2012 | <a class='category' href='/blog/categories/json/'>JSON</a>, <a class='category' href='/blog/categories/pattern/'>Pattern</a>, <a class='category' href='/blog/categories/rest/'>REST</a>, <a class='category' href='/blog/categories/rails/'>Rails</a>
        </time>
        <p>Rails is rapidly getting more and more popular as a comfortable platform for REST services. And it really is. We do Rails in this way for quite a long time already. There is however a real problem: <strong>JSON views are unmanageable!</strong></p>

<p>At first it may look like everything’s just fine. All you need is <s>love</s> <code>.to_json</code> or <a href="https://github.com/nesquena/rabl">RABL</a> is some particular cases. But then things go wild. And you start switching JSON Builders one after another.</p>

<h3>The problem</h3>

<p>Let’s say you have a banking service. That’s like 30 models. Each has extended CRUD endpoint (extensions are maybe 3 or 4 methods per endpoint). Each model has like 10 or 12 fields which are quite common to be large strings. And off course all that stuff is insanely linked up to like 4 or 5 levels of <code>belongs_to</code>.</p>

<p>The another thing to remember is that in real life your JSON entities are not just dumps of your ActiveRecord attributes. Two very common things are conditions (whether an attribute should appear) and custom methods.</p>

<p><strong>The problem is that consumer often wants unique set of fields for EVERY method among EVERY endpoint. Set of relations&#8217; fields can differ too!</strong></p>


      </article>
      <div class="more">
        <div class="read">
          <a href="/blog/2012/03/24/rails-plus-rest-avoiding-the-views-nightmare/">Read more</a>
          <span>&rarr;</span>
        </div>
        <div class="comments">
          <img src="/images/comments.png">
          <a href="/blog/2012/03/24/rails-plus-rest-avoiding-the-views-nightmare/#disqus_thread">Comments</a>
        </div>
      </div>
    </li>
    
    
  </div>
  
  
  
  <div style="clear:both"></div>
  <div class="paginator">
    
    
    <div class="button">
      <a href="/">Newer entries</a>
      <img src="/images/right_arrow.png" alt="right_arrow">
    </div>
    
  </div>
</div>
          </div>
          <div class="footer">
            Powered by <a href="http://octopress.org">Octopress</a>; Hosted at <a href="https://github.com/inossidabile/blog">Github</a>; Stay tuned :)
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f707c6c613f5d6d0000003f');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
  </script>
</body>
</html>